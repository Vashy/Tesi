% !TEX encoding = UTF-8
% !TEX TS-program = pdflatex
% !TEX root = ../tesi.tex

%**************************************************************
\chapter{Descrizione dello stage}\label{cap:descrizione-stage}

\intro{In questo capitolo viene descritto nel dettaglio il progetto di
stage ed esplicato il piano di lavoro stipulato insieme al relatore aziendale e revisionato del relatore interno.}

%**************************************************************

\section{Lo stage}

Lo stage si è svolto nella sede di Padova dell'azienda ospitante, Sync Lab, nell'arco delle otto settimane previste nel piano di lavoro, con le seguenti date di inizio e fine:
\begin{itemize}
	\item inizio il 6 maggio 2019;
	\item fine il 28 giugno 2019.
\end{itemize}
Il progetto di stage consiste nell'implementazione di una \gls{webapp}\gloss\ a \glsdisp{microservizio}{microservizi}\gloss\ per il trasferimento in una nuova piattaforma del servizio di \gls{skill-matrix}\gloss\ usato da Sync Lab per organizzare le competenze delle persone che vanno in azienda per un colloquio.

Prima di ogni colloquio a Sync Lab, è richiesto al candidato di compilare un foglio di calcolo contenente le competenze di interesse
per l'azienda e il relativo livello.

L'idea del progetto è quella di un portale web in cui il candidato inserirà i livelli delle competenze, in alternativa al vecchio foglio di calcolo.

Per fare ciò, è stato scelto un approccio moderno: 
\begin{itemize}
	\item il \textit{front-end} utilizzerà \textit{framework} di ultima generazione (nel nostro caso, \gls{angular}\gloss);
	\item il \textit{back-end} utilizzerà un'architettura a \glsdisp{microservizio}{microservizi} implementati con il \textit{framework} \gls{spring}\gloss (\gls{java}\gloss), per questioni di uniformità e semplicità, con \gls{mongodb}\gloss\ come \gls{dbms}\gloss.
\end{itemize}

A svolgere tale progetto ci saranno altri stagisti oltre al sottoscritto, a cui a ognuno sarà assegnato un equo carico di lavoro.

Per quanto riguarda il \textit{back-end}, l'azienda possiede già un portale web usato per caricare i dati dei candidati. Il \gls{dbms} utilizzato per i dati di tale portale è \gls{oracle}\gloss.

Il mio ruolo nel progetto consisterà prettamente nell'implementazione di alcuni \glsdisp{microservizio}{microservizi} back-end e nel riadattamento del vecchio portale.

%**************************************************************

\section{Il progetto: SyncRec}

Si richiede al tirocinante, come prima parte dello stage, di apprendere le tecnologie necessarie a poter svolgere le fasi di analisi, progettazione e implementazione del progetto di stage conclusivo.
Le tematiche da apprendere sono le seguenti:
\begin{itemize}
	\item \gls{java} SE e \gls{java} EE;
	\item Database \gls{mongodb};
	\item \gls{spring}\gloss, nei moduli:
	\begin{itemize}[noitemsep]
		\item \textit{Spring Core};
		\item \textit{Spring Boot};
		\item \textit{Spring MVC};
		\item \textit{Spring Data MongoDB};
		\item \textit{Spring Data REST}.
	\end{itemize}
	\item Architettura a \glsdisp{microservizio}{microservizi};
	\item Tecnologie per il \textit{frontend}:
	\begin{itemize}[noitemsep]
		\item \gls{javascript}\gloss;
		\item \gls{typescript}\gloss;
		\item \gls{angular}.
	\end{itemize}
\end{itemize}

Lo studio delle tecnologie per il \textit{front-end} è puramente didattico, e non è pertanto prevista una concretizzazione.
Sviluppare il \textit{front-end} sarà un'attività delegata ad altri stagisti.

La seconda parte dello stage è invece incentrata all'effettiva implementazione dei \glsdisp{microservizio}{microservizi} del \textit{back-end} per il prodotto \textit{SyncRec}, il nuovo portale aziendale per la gestione delle competenze dei candidati.
 % TODO da dire di REST

Il committente di tale prodotto è l'azienda Sync Lab stessa, in quanto sarà un \textit{software} usato internamente a soli scopi burocratici.
Nello specifico, sarà lo stesso \fabio\ a coprire il ruolo di committente.

\section{Requisiti e obiettivi}

\subsection{Servizi  da sviluppare}

I \glsdisp{microservizio}{microservizi} accordati da implementare sono riportati nel dettaglio in seguito. Ognuno di essi esporrà le \gls{api}\gloss\ tramite degli specifici \textit{endpoint}
raggiungibili tramite i vari tipi di richieste \acrshort{http}\gloss\ (GET, POST, DELETE, etc\dots).
%Ogni tipo di richiesta ha la sua semantica e un significato ben specifico, che verrà spiegato nei paragrafi dedicati
% TODO Specificare quale sezione.

% TODO appendice REST?

\subsubsection{Microservizio: Email}

Il \gls{microservizio} email ha il semplice compito di inviare una email specifica.
Testo, oggetto e destinatario sono dati definiti nel database \gls{mongodb}
\textit{syncrec-email}, mentre le proprietà del server \acrshort{smtp} sono definite in un file di configurazione.

L'invio della email avviene in modo sincrono quando viene effettuata una richiesta POST tramite l'endpoint \texttt{/sendEmail}.
I campi da immettere nel corpo della richiesta sono:
\begin{itemize}
	\item \texttt{receiver}: il destinatario della mail.
\end{itemize}

La seguente potrebbe essere un esempio di richiesta al servizio Email:

\begin{tcolorbox}
	\begin{verbatim} curl -X POST http://localhost:8080/syncrec/sendEmail -d \
'{ "receiver":  "emailReceiver@email.it" }'
	\end{verbatim}
\end{tcolorbox}\addcontentsline{codes}{section}{Esempio richiesta POST per microservizio email}

Come risposta, è possibile ottenere 2 risultati:
\begin{itemize}
	\item \textbf{Ok} (200) e un \textit{payload} contenente i campi usati
	per l'invio email;
	\item \textbf{Unprocessable entity} (406) se non è stato possibile inviare l'email (per errori di connessioni al database, al server \acrshort{smtp} etc\dots).
\end{itemize}

\subsubsection{Microservizio: User/Login}

Questo \gls{microservizio} espone la risorsa \texttt{User} nell'endpoint
\texttt{syncrec/users}, accessibile e modificabile via \gls{api} \acrshort{rest}\gloss. I dati persistenti sono salvati e acceduti tramite il database \textit{syncrec-users} di
\gls{mongodb}.

Inoltre, tramite l'endpoint \texttt{/users/login} e una richiesta POST,
è possibile effettuare l'operazione di login.

I parametri richiesti nell'operazione di login sono:
\begin{itemize}
	\item \texttt{username}: campo contenente lo \textit{username} o l'email dell'utente che vuole autenticarsi;
	\item \texttt{password}: campo contenente la password relativa all'utente da autenticare.
\end{itemize}

Le possibili risposte che verranno inoltrate al chiamante possono essere:
\begin{itemize}
	\item \textbf{Ok} (200) e il \acrshort{json}\gloss\ contenente i campi relativi all'utente autenticato;
	\item \textbf{Bad request} (400) se il corpo della richiesta non contiene i campi riportati sopra, con corpo contenente un messaggio d'errore (sempre in formato \acrshort{json});
	\item \textbf{Unauthorized} (401) se l'autenticazione fallisce, con corpo vuoto.
\end{itemize}

\subsubsection{Microservizio: Catalog}

È stato richiesto di implementare un \gls{microservizio} con il fine di restituire,
attraverso una richiesta \acrshort{http}, una lista di \textit{skill} di interesse dell'azienda.

Questo era precedentemente effettuato tramite un foglio di calcolo inviato preventivamente ai candidati, i quali erano tenuti a compilarlo.

\subsubsection{Microservizio: Applicant}

L'ultima maschera da implementare è il \gls{microservizio} di gestione dei candidati (\textit{applicants}).

Sarà possibile aggiungere, rimuovere o modificare i candidati tramite
le opportune chiamate \acrshort{rest} all'\textit{endpoint} \texttt{syncrec/applicants}:
\begin{itemize}
	\item \textbf{GET} per la visualizzazione;
	\item \textbf{POST} per l'aggiunta;
	\item \textbf{DELETE} per la rimozione;
	\item \textbf{PUT} e \textbf{PATCH} per la modifica.
\end{itemize}

Ogni candidato avrà associati dei documenti, i quali non è ragionevole passare tramite \textit{payload} \acrshort{json} in un servizio \acrshort{rest}, con il tipico \textit{header} di \acrshort{rest}: \texttt{Content-Type: application/json}.

Per fare ciò, i documenti saranno salvati in un'apposita \textit{collection} (analogo di \gls{mongodb} alle tabelle di un database relazionale):
\textit{documents}.
Ogni documento avrà associato ID, il nome e il contenuto binario del file.
L'aggiunta, la rimozione e la modifica di tali documenti avverrà tramite richieste con \textit{header} \texttt{Content-Type: multipart/form-data}
all'\textit{endpoint} \texttt{syncrec/documents}.

Nelle risorse \textit{applicants}, verrà salvato l'ID dei documenti associati, con un opportuno check in fase di salvataggio dell'entità.

\subsection{Obiettivi}

\subsubsection*{Notazione}
Si farà riferimento ai requisiti secondo le seguenti notazioni:
\begin{itemize}
	\item \textit{O} per i requisiti obbligatori, vincolanti in quanto obiettivo primario richiesto dal committente;
	\item \textit{D} per i requisiti desiderabili, non vincolanti o strettamente necessari,
	ma dal riconoscibile valore aggiunto;
	\item \textit{F} per i requisiti facoltativi, rappresentanti valore aggiunto non strettamente 
	competitivo.
\end{itemize}

Le sigle precedentemente indicate saranno seguite da una coppia sequenziale di numeri, identificativo del requisito.

\begin{itemize}[noitemsep]
	\item Obbligatori
	\begin{itemize}
		\item \underline{\textit{O01}}: Acquisizione competenze previste dal programma;
		\item \underline{\textit{O02}}: Capacità di raggiungere gli obiettivi richiesti in autonomia seguendo il crono-programma;
		\item \underline{\textit{O03}}: Portare a termine le modifiche richieste dal cliente con una percentuale di superamento pari al 50\%.
	\end{itemize}
	\item Desiderabili
	\begin{itemize}
		\item \underline{\textit{D01}}: Portare a termine le modifiche richieste dal cliente con una percentuale di superamento pari all'80\%.
	\end{itemize}
	\item Facoltativi
	\begin{itemize}
		\item \underline{\textit{F01}}: Acquisizione competenze sul \textit{framework} \gls{spring-cloud}\gloss.
	\end{itemize}
\end{itemize}

%**************************************************************

\section{Pianificazione}

In questa sezione viene mostrata la pianificazione delle settimane e delle ore per ogni attività concordata con il relatore aziendale e il relatore interno.

\subsection{Pianificazione delle settimane}

\begin{itemize}
	\item \textbf{Prima Settimana}
	\begin{itemize}
		\item Presentazione strumenti di lavoro per la condivisione del materiale di studio e per la gestione
		dell'avanzamento del percorso (\textit{Slack}, \textit{Trello}, \gls{git}\gloss);
		\item Condivisione scaletta di argomenti;
		\item Veloce panorama su metodologie \textit{Agile/Scrum}; % 8
		\item \gls{java} Standard Edition - ripasso generale; % 24
		\item Introduzione al \gls{dbms} noSQL \gls{mongodb}. % 8
	\end{itemize}

	\item \textbf{Seconda Settimana}
	\begin{itemize}
		\item Approfondimenti \gls{mongodb}; % 8
		\item \gls{java} Enterprise Edition:
		\begin{itemize}
			\item \textit{JSP/Servlet}; % 8
			\item \textit{Spring Boot}; % 8
			\item \textit{Spring Core}; % 8
			\item \textit{Spring MVC}, introduzione. % 8
		\end{itemize}
	\end{itemize}

	\item \textbf{Terza Settimana}
	\begin{itemize}
		\item \gls{java} Enterprise Edition:
		\begin{itemize}
			\item \textit{Spring MVC}; % 8
			\item \textit{Spring Data MongoDB}; % 16
			\item \textit{Spring Data REST}. % 16
		\end{itemize}
	\end{itemize}

	\item \textbf{Quarta Settimana}
	\begin{itemize}
		\item \gls{java}\gloss\ Enterprise Edition:
		\begin{itemize}
			\item \textit{Spring Data REST}, approfondimento; % 8
		\end{itemize}
		\item Studio architettura a microservizi. % 32
	\end{itemize}

	\clearpage

	\item \textbf{Quinta Settimana}
	\begin{itemize}
		\item Front-end web: \gls{javascript}/\gls{typescript} e \gls{angular}.
	\end{itemize}

	\item \textbf{Sesta Settimana}
	\begin{itemize}
		\item Analisi dei requisiti richiesti dal cliente e degli impatti sull'applicazione di studio;
		\item Implementazione delle modifiche richieste.
	\end{itemize}

	\item \textbf{Settima Settimana}
	\begin{itemize}
		\item Implementazione delle modifiche richieste.
	\end{itemize}

	\item \textbf{Ottava Settimana}
	\begin{itemize}
		\item Conclusione dell'implementazione richiesta;
		\item Verifica dell'intervento - collaudo finale;
		\item Consegna software e messa in esercizio.
	\end{itemize}
\end{itemize}

%**************************************************************

\clearpage

\subsection{Pianificazione delle ore}

\begin{table}[H]
	\begin{paddedtablex}[1.4]{\textwidth}{cX}
		\textbf{Durata in ore} & \textbf{Descrizione dell'attività} \\\toprule
		
		\textbf{8} & \textbf{Presentazione del percorso, ripasso metodologie Agile/Scrum e attivazione degli strumenti e degli ambienti di lavoro} \\
		%\hline
		
		\textbf{24} & \textbf{Studio Java Standard Edition}\\%\hline
		\textbf{16} & \textbf{Studio del DBMS NoSQL MongoDB}\\%\hline
		\midrule
		\textbf{80} & \textbf{Studio Java Enterprise Edition}\\\hdashline
		
		\multirow{6}{0cm}\\
		\textit{8} &
		\textit{Java EE: JSP/Servlet}\\
		\textit{8} &
		\textit{Java EE: Spring Boot}\\
		\textit{8} &
		\textit{Java EE: Spring Core}\\
		\textit{16} &
		\textit{Java EE: Spring MVC}\\
		\textit{16} &
		\textit{Java EE: Spring Data MongoDB}\\
		\textit{24} &
		\textit{Java EE: Spring Data REST}\\%\hline
		
		\midrule
		\textbf{32} & \textbf{Studio architettura a micro-servizi} \\%\hline
		
		\midrule
		\textbf{40} & \textbf{Studio front-end web}\\\hdashline
		\multirow{2}{0cm}\\%
		\textit{16} &
		\textit{Front-end: Javascirpt/Typescript}\\%
		\textit{24} &
		\textit{Front-end: Angular}\\%\hline
	
		\midrule
		\textbf{92} & \textbf{Implementazione progetto di studio}\\\hdashline
		\multirow{2}{0cm}\\
		\textit{8} &
		\textit{Analisi dei requisiti utente e degli impatti}\\
		\textit{84} &
		\textit{Implementazione modifiche} \\%\hline
		
		\midrule
		\textbf{8} & \textbf{Collaudo Finale}\\\hdashline
		\multirow{2}{0cm}\\
		\textit{4} &
		\textit{Verifica dell'intervento}\\
		\textit{4} &
		\textit{Consegna del software e messa in esercizio} \\%\hline
		\bottomrule
		\textbf{Totale ore} & \multicolumn{1}{c}{\textbf{300}} \\%\hline
	
	\end{paddedtablex}
	\caption{Tabella ripartizione ore pianificate}
\end{table}
